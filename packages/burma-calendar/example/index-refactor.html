<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>Myanmar Calendar ~1500 years</title>
    <script src='mc-refactor.js'></script>
    <style>
        body {
            width: 300px;
            margin: auto;
        }

        lable {
            width: 100px;
            display: inline-block;
        }

        input {
            height: 30px;
        }

        select {
            height: 50px;
            line-height: 50px;
        }

        input,
        select {
            margin-bottom: 30px;
            display: inline-block;
            max-width: 150px;
            min-width: 150px;
        }

        input[type=submit] {
            font-weight: bold;
            padding: 10px;
            height: auto;
            width: auto;
            margin: auto;
        }

        input[type=date] {
            font-weight: bold;
            padding: 10px;
            height: auto;
            width: auto;
            margin-bottom: 30px;
        }

        div.submitBtnDiv {
            width: 100%;
            margin: auto;
            text-align: center;
        }

        #englishDataSpan {
            margin-bottom: 30px;
            display: inline-block;
        }

        a {
            text-decoration: none;
        }

        span {
            color: blue;
            border: 2px solid blue;
            padding: 5px;
            margin: 5px;
            display: inline-block;
            border-radius: 5%;
        }

        span.nagahle_body,
        span.mahabote_body,
        span.nakhat_body {
            border: none;
        }

        span.nagahle,
        span.mahabote,
        span.nakhat {
            border: none;
            font-weight: bold;
        }

        #myanmarDataSpan {
            display: inline-block;
            border: none;
        }

        span.thingyanTitle{
            border: none;
            font-weight: bold;
        }

        span.yatyaza,
        span.pyathada,
        span.thamanyo,
        span.amyittasote,
        span.warameittugyi,
        span.warameittunge,
        span.yatpote,
        span.thamaphyu,
        span.nagapor,
        span.mahayatkyan,
        span.yatyoutema,
        span.shanyat{
            cursor: pointer;
        }
    </style>
</head>

<body>

    <form action="#" id="engToMmForm">
        <h3>English Date to Myanmar Date</h3>
        <lable for="englishDataInput">အင်္ဂလိပ် ရက်စွဲ</lable>
        <input type="date" id="englishDateInput" required />
        <br>
        <span id="myanmarDataSpan"></span>
        <span class="sabbath">ဉပုဒ်နေ့</span>
        <span class="sabbatheve">အဖိတ်နေ့</span>
        <span class="yatyaza">ရက်ရာဇာ</span>
        <span class="pyathada">ပြဿဒါး</span>
        <span class="thamanyo">သမားညို</span>
        <span class="amyeittasote">အမြိတ္တစုတ်</span>
        <span class="warameittugyi">ဝါရမိတ္တုကြီး</span>
        <span class="warameittunge">ဝါရမိတ္တုငယ်</span>
        <span class="yatpote">ရက်ပုပ်</span>
        <span class="thamaphyu">သမားဖြူ</span>
        <span class="nagapor">နဂါးပေါ်</span>
        <span class="yatyotema">ရက်ယုတ်မာ</span>
        <span class="mahayatkyan">မဟာရက်ကြမ်း</span>
        <span class="shanyat">ရှမ်းရက်</span>
        <span class="nagahle_body">နဂါးခေါင်း <span class="nagahle"></span> ဘက်သို့လှည့်</span>
        <span class="mahabote_body">မဟာဘုတ်အရ <span class="mahabote"></span> ဖွားဖြစ်သည်</span>
        <span class="nakhat_body">နက္ခတ်အရ<span class="nakhat"></span> နက္ခတ်</span>
        <h3>သင်္ကြန်အချိန်အခါများ</h3>
        <ul>
            <li> <span class="thingyanTitle">သင်္ကြန်ကျချိန်</span>  <span class="thingyanAkyaTime"></span></li>
            <li> <span class="thingyanTitle">သင်္ကြန်တက်ချိန်</span> <span class="thingyanAtatTime"></span></li>
            <li> <span class="thingyanTitle">သင်္ကြန်အကြိုနေ့</span> <span class="thingyanAkyoDate"></span></li>
            <li> <span class="thingyanTitle">သင်္ကြန်အကျနေ့</span> <span class="thingyanAkyaDate"></span></li>
            <li> <span class="thingyanTitle">သင်္ကြန်အကြတ်နေ့</span> <span class="thingyanAkytDate"></span></li>
            <li> <span class="thingyanTitle">သင်္ကြန်အတက်နေ့</span> <span class="thingyanAtatDate"></span></li>
            <li> <span class="thingyanTitle">နှစ်ဆန်းတစ်ရက်နေ့</span> <span class="hnitSanDate"></span></li>
        </ul>
        <br>
    </form>

    <hr>
    <form action="#" id="mmToEngForm">
        <h3>Myanmar Date to English Date</h3>
        <lable for="myanmarYearInput">မြန်မာ ခုနှစ်</lable>
        <input type="number" id="myanmarYearInput" required />
        <br>
        <lable for="myanmarMonthInput">မြန်မာ လ</lable>
        <select id="myanmarMonthInput" required>
            <option value="0" selected>ပဝါဆို</option>
            <option value="1">တန်ခူး</option>
            <option value="2">ကဆုန်</option>
            <option value="3">နယုန်</option>
            <option value="4">ဝါဆို</option>
            <option value="5">ဝါခေါင်</option>
            <option value="6">တော်သလင်း</option>
            <option value="7">သီတင်းကျွတ်</option>
            <option value="8">တန်ဆောင်မုန်း</option>
            <option value="9">နတ်တော်</option>
            <option value="10">ပြာသို</option>
            <option value="11">တပို့တွဲ</option>
            <option value="12">တပေါင်း</option>
        </select>
        <br>
        <lable for="myanmarMoonPhaseInput">လဆန်း / လပြည့်ကျော်</lable>
        <select id="myanmarMoonPhaseInput" required>
            <option value="0">လဆန်း</option>
            <option value="1">လပြည့်</option>
            <option value="2">လပြည့်ကျော်</option>
            <option value="3">လကွယ်</option>
        </select>
        <br>
        <lable for="myanmarMonthTypeInput">နှောင်းတန်ခူး / ဉီးတန်ခူး</lable>
        <select id="myanmarMonthTypeInput" required>
            <option value="0">နှောင်းတန်ခူး</option>
            <option value="1">ဉီးတန်ခူး</option>
        </select>
        <br>
        <lable for="myanmarDayInput">ရက်</lable>
        <input type="number" id="myanmarDayInput" min="1" max="15" required />
        <br>
        <lable>အင်္ဂလိပ် ရက်စွဲ</lable>
        <span id="englishDataSpan">--</span>
        <br>
        <div class="submitBtnDiv">
            <input type="submit" value="အင်္ဂလိပ် ရက်စွဲပြောင်းရန်" />
        </div>


    </form>
    <hr>
    <ul>
        <li>ကမ္ဘာသုံး ပြက္ခဒိန် နှင့် မြန်မာ ပြက္ခဒိန် ကြား အပြန်အလှန်ပြောင်းပေးသည့် ပရိုဂရမ် ဖြစ်ပါသည်။</li>
        <li><a href="https://www.npmjs.com/package/myanmar-calendar">Myanmar Calendar JS Library</a> ကို အသုံးပြု၍
            ရေးသားထားခြင်း ဖြစ်ပါသည်။</li>
        <li>အသုံးပြုသည့် သီအိုရီ၊ အော်ဂိုရစ်သမ် နှင့် ရှင်းလင်းချက် များကို <a
                href="http://cool-emerald.blogspot.com/2013/06/algorithm-program-and-calculation-of.html">ဤနေရာ</a> တွင်
            ဖတ်နိုင်ပါသည်။</li>
    </ul>
    <script>

        var englishDateInput = document.getElementById("englishDateInput");
        var myanmarDateInput = document.getElementById("myanmarDateInput");
        var sabbathSpan = document.getElementsByClassName("sabbath");
        var sabbatheveSpan = document.getElementsByClassName("sabbatheve");
        var yatyazaSpan = document.getElementsByClassName("yatyaza");
        var pyathadaSpan = document.getElementsByClassName("pyathada");
        var thamanyoSpan = document.getElementsByClassName("thamanyo");
        var amyeittasoteSpan = document.getElementsByClassName("amyeittasote");
        var warameittugyiSpan = document.getElementsByClassName("warameittugyi");
        var warameittungeSpan = document.getElementsByClassName("warameittunge");
        var yatpoteSpan = document.getElementsByClassName("yatpote");
        var thamaphyuSpan = document.getElementsByClassName("thamaphyu");
        var nagaporSpan = document.getElementsByClassName("nagapor");
        var mahayatkyanSpan = document.getElementsByClassName("mahayatkyan");
        var yatyotemaSpan = document.getElementsByClassName("yatyotema");
        var shanyatSpan = document.getElementsByClassName("shanyat");
        var nagahleBodySpan = document.getElementsByClassName("nagahle_body");
        var nagahleSpan = document.getElementsByClassName("nagahle");
        var mahaboteBodySpan = document.getElementsByClassName("mahabote_body");
        var mahaboteSpan = document.getElementsByClassName("mahabote");
        var nakhatBodySpan = document.getElementsByClassName("nakhat_body");
        var nakhatSpan = document.getElementsByClassName("nakhat");

        var thingyanAkyaTimeSpan = document.getElementsByClassName("thingyanAkyaTime");

        var thingyanAtatTimeSpan = document.getElementsByClassName("thingyanAtatTime");

        var thingyanAkyoDateSpan = document.getElementsByClassName("thingyanAkyoDate");

        var thingyanAkyaDateSpan = document.getElementsByClassName("thingyanAkyaDate");

        var thingyanAkytDateSpan = document.getElementsByClassName("thingyanAkytDate");

        var thingyanAtatDateSpan = document.getElementsByClassName("thingyanAtatDate");

        var thingyanAtatDateSpan = document.getElementsByClassName("thingyanAtatDate");

        var hnitSanDateSpan = document.getElementsByClassName("hnitSanDate");

        yatyazaSpan[0].addEventListener('click',(event)=>{
            alert(dayDefination.yatyaza);
        });

        pyathadaSpan[0].addEventListener('click',(event)=>{
            alert(dayDefination.pyathada);
        });

        thamanyoSpan[0].addEventListener('click',(event)=>{
            alert(dayDefination.thamanyo);
        });

        amyeittasoteSpan[0].addEventListener('click',(event)=>{
            alert(dayDefination.amyeittasote);
        });

        warameittugyiSpan[0].addEventListener('click',(event)=>{
            alert(dayDefination.warameittugyi);
        });

        warameittungeSpan[0].addEventListener('click',(event)=>{
            alert(dayDefination.warameittunge);
        });

        yatpoteSpan[0].addEventListener('click',(event)=>{
            alert(dayDefination.yatpote);
        });

        thamaphyuSpan[0].addEventListener('click',(event)=>{
            alert(dayDefination.thamaphyu);
        });

        nagaporSpan[0].addEventListener('click',(event)=>{
            alert(dayDefination.nagapor);
        });

        mahayatkyanSpan[0].addEventListener('click',(event)=>{
            alert(dayDefination.mahayatkyan);
        });

        yatyotemaSpan[0].addEventListener('click',(event)=>{
            alert(dayDefination.yatyotema);
        });

        shanyatSpan[0].addEventListener('click',(event)=>{
            alert(dayDefination.shanyat);
        });

        function hideAll() {
            sabbathSpan[0].style.display = "none";
            sabbatheveSpan[0].style.display = "none";
            yatyazaSpan[0].style.display = "none";
            pyathadaSpan[0].style.display = "none";
            thamanyoSpan[0].style.display = "none";
            amyeittasoteSpan[0].style.display = "none";
            warameittugyiSpan[0].style.display = "none";
            warameittungeSpan[0].style.display = "none";
            yatpoteSpan[0].style.display = "none";
            thamaphyuSpan[0].style.display = "none";
            nagaporSpan[0].style.display = "none";
            mahayatkyanSpan[0].style.display = "none";
            yatyotemaSpan[0].style.display = "none";
            shanyatSpan[0].style.display = "none";
            // nagahleBodySpan[0].style.display = "none";
            // nagahleSpan[0].style.display = "none";
            // mahaboteBodySpan[0].style.display = "none";
            // mahaboteSpan[0].style.display = "none";
            // nakhatBodySpan[0].style.display = "none";
            // nakhatSpan[0].style.display = "none";
        }

        document.getElementById("myanmarMoonPhaseInput").addEventListener("change", (event) => {
            console.log("myanmarMoonPhaseInput->onChange");
            let mmMoonPhase = parseInt(document.getElementById("myanmarMoonPhaseInput").value);
            if (mmMoonPhase == 1 || mmMoonPhase == 3) {
                document.getElementById("myanmarDayInput").value = 1;
                // hide and disabled
            }
        });
        document.getElementById("mmToEngForm").addEventListener("submit", (event) => {
            event.preventDefault();
            console.log("mmToEngForm submitted");

            let mmYear = parseInt(document.getElementById("myanmarYearInput").value);// int
            let mmMonth = parseInt(document.getElementById("myanmarMonthInput").value);// int
            let mmMonthType = parseInt(document.getElementById("myanmarMonthTypeInput").value);// int
            let mmMoonPhase = parseInt(document.getElementById("myanmarMoonPhaseInput").value);// int
            let mmFortnightDay = parseInt(document.getElementById("myanmarDayInput").value);// int


            let jDayFromMm = m2j(mmYear, mmMonth, mmMonthType, mmMoonPhase, mmFortnightDay);
            //let jDayFromMm = m2j(M.my,M.mm,M.mmt,M.mp,M.fd);
            console.log(jDayFromMm);
            console.log('jDayFromMm ' + jDayFromMm);
            let westernDate = j2w(jDayFromMm);
            console.log(westernDate);
            document.getElementById("englishDataSpan").textContent = "" + westernDate.y + "-" + monthsEN[westernDate.m] + "-" + westernDate.d;
        });
        // ui function
        function engDateOnChange() {
            let dateObj = new Date(document.getElementById("englishDateInput").value);
            let year = dateObj.getFullYear();
            let month = dateObj.getMonth() + 1;
            let date = dateObj.getDate();
            let mmDate = engToMm(year, month, date);
            document.getElementById("myanmarDataSpan").textContent = mmDate.year + " ခုနှစ် " + mmDate.month + " " + mmDate.moonPhase + " " + mmDate.date + " ရက်၊ " + mmDate.day + " နေ့";
            // hide all
            hideAll();
            if (mmDate.sabbath != "") sabbathSpan[0].style.display = "inline-block";
            if (mmDate.sabbatheve != "") sabbatheveSpan[0].style.display = "inline-block";
            if (mmDate.yatyaza != "") yatyazaSpan[0].style.display = "inline-block";
            if (mmDate.pyathada != "") pyathadaSpan[0].style.display = "inline-block";
            if (mmDate.thamanyo != "") thamanyoSpan[0].style.display = "inline-block";
            if (mmDate.amyeittasote != "") amyeittasoteSpan[0].style.display = "inline-block";
            if (mmDate.warameittugyi != "") warameittugyiSpan[0].style.display = "inline-block";
            if (mmDate.warameittunge != "") warameittungeSpan[0].style.display = "inline-block";
            if (mmDate.yatpote != "") yatpoteSpan[0].style.display = "inline-block";
            if (mmDate.thamaphyu != "") thamaphyuSpan[0].style.display = "inline-block";
            if (mmDate.nagapor != "") nagaporSpan[0].style.display = "inline-block";
            if (mmDate.yatyotema != "") yatyotemaSpan[0].style.display = "inline-block";
            if (mmDate.mahayatkyan != "") mahayatkyanSpan[0].style.display = "inline-block";
            nagahleSpan[0].textContent = mmDate.nagahle;
            mahaboteSpan[0].textContent = mmDate.mahabote;
            nakhatSpan[0].textContent = mmDate.nakhat;
            thingyanAkyaTimeSpan[0].textContent = makeDateTimeText(mmDate.thingyan.သင်္ကြန်ကျချိန်);
            thingyanAtatTimeSpan[0].textContent = makeDateTimeText(mmDate.thingyan.သင်္ကြန်တက်ချိန်);
            thingyanAkyoDateSpan[0].textContent = makeDateText(mmDate.thingyan.သင်္ကြန်အကြိုနေ့);
            thingyanAkyaDateSpan[0].textContent = makeDateText(mmDate.thingyan.သင်္ကြန်အကျနေ့);
            thingyanAkytDateSpan[0].textContent = makeDateTimeTextArray(mmDate.thingyan.သင်္ကြန်အကြတ်နေ့);
            thingyanAtatDateSpan[0].textContent = makeDateText(mmDate.thingyan.သင်္ကြန်အတက်နေ့);
            hnitSanDateSpan[0].textContent = makeDateText(mmDate.thingyan.နှစ်ဆန်းတစ်ရက်နေ့);

        }
        document.getElementById("englishDateInput").addEventListener("change", engDateOnChange);

        function makeDateText(date){
            // console.log('makeDateText');
            return date.y+" ခုနစ် "+date.m+" အေပြီလ "+date.d+" ရက်";
        }
        function makeDateTimeText(date){
            // console.log('makeDateTimeText');
            return date.y+" ခုနစ် "+date.m+" အေပြီလ "+date.d+" ရက် "+date.h+" နာရီ "+ date.m +" မိနစ်" + Math.round(date.s) +" စက္ကန့်";
            //return "၂၀၂၁ ခုနစ် အေပြီလ ၂၃ ရက် ၂ နာရီ ၄ မိနစ် ၆ စက္ကန့်";
        }
        function makeDateTimeTextArray(dateArr){
            let str = "";
            for(let i=0; i<dateArr.length; i++){
                let date = dateArr[i];
                str += date.y+" ခုနစ် "+date.m+" အေပြီလ "+date.d+" ရက်။ "
            }
            return str;
        }
        function init() {
            document.getElementById("englishDateInput").valueAsDate = new Date();
            engDateOnChange();
        }

        init();

        // function နှစ်ခုလိုချင်တယ်
        // ပထမ တစ်ခုက English Date ထည့်ပေးလိုက်ရင် Myanmar Date အပြည့်အစုံ ပြန်ပေးတာမျိုး
        // နဂို အချက်အလက် (ဂဏန်းတွေလည်း ပါမယ်), ဘာသာပြန်ထားပြီးသားတွေလည်း ပါမယ်ဆိုတာမျိုး

        // console.log(ThingyanTime(1383));
        // console.log(သင်္ကြန်ချိတ်တွက်ရန်(1383));
    </script>
</body>

</html>
